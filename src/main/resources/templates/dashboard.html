<!-- This shows the a table where all the available rooms are shown.
-->

<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head th:replace="~{layout :: head('Dashboard - StudyRooms')}"></head>

<body th:replace="~{layout :: body('dashboard', ~{::content})}">
<div th:fragment="content">

    <h1 class="mb-4">Welcome to your dashboard!</h1>

    <div class="row g-3">
        <!-- Study Spaces -->
        <div class="col-md-6 col-lg-4">
            <div class="card h-100">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">Study Spaces</h5>
                    <p class="card-text flex-grow-1">
                        Browse the available study rooms in the system.
                    </p>
                    <a th:href="@{/spaces}" class="btn btn-primary mt-auto">
                        View Study Spaces
                    </a>
                </div>
            </div>
        </div>

        <!-- New Reservation -->
        <div class="col-md-6 col-lg-4">
            <div class="card h-100">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">New Reservation</h5>
                    <p class="card-text flex-grow-1">
                        Create a new reservation for a study space.
                    </p>
                    <a th:href="@{/reservations/new}" class="btn btn-primary mt-auto">
                        New Reservation
                    </a>
                </div>
            </div>
        </div>

        <!-- My Reservations -->
        <div class="col-md-6 col-lg-4">
            <div class="card h-100">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">My Reservations</h5>
                    <p class="card-text flex-grow-1">
                        View and manage your existing reservations.
                    </p>
                    <a th:href="@{/reservations/my}" class="btn btn-primary mt-auto">
                        My Reservations
                    </a>
                </div>
            </div>
        </div>

        <!-- Staff: Manage Spaces -->
        <div class="col-md-6 col-lg-4"
             th:if="${#authorization.expression('hasRole(''STAFF'')')}">
            <div class="card h-100 border-warning">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">Manage Spaces (Staff)</h5>
                    <p class="card-text flex-grow-1">
                        Staff tools for managing study spaces.
                    </p>
                    <a th:href="@{/staff/spaces}" class="btn btn-outline-warning mt-auto">
                        Manage Spaces
                    </a>
                </div>
            </div>
        </div>

        <!-- Staff: All Reservations -->
        <div class="col-md-6 col-lg-4"
             th:if="${#authorization.expression('hasRole(''STAFF'')')}">
            <div class="card h-100 border-warning">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">All Reservations (Staff)</h5>
                    <p class="card-text flex-grow-1">
                        View all reservations in the system (staff only).
                    </p>
                    <a th:href="@{/staff/reservations}" class="btn btn-outline-warning mt-auto">
                        All Reservations
                    </a>
                </div>
            </div>
        </div>

        <!-- Staff: Occupancy Statistics -->
        <div sec:authorize="hasRole('STAFF')" class="col-md-4">
            <div class="p-4 border rounded-3 shadow-sm bg-light border-warning">
                <h5 class="mb-2">Occupancy Statistics (Staff)</h5>
                <p class="text-muted mb-3">View daily and weekly occupancy for study spaces.</p>

                <a th:href="@{/staff/occupancy}" class="btn btn-outline-warning w-100">
                    View Occupancy
                </a>
            </div>
        </div>

        <div th:if="${penaltyUntil}" class="alert alert-danger mt-3">
            You are blocked from making new reservations until
            <strong th:text="${penaltyUntil}">2025-01-01</strong>.
        </div>
    </div>

</div>
</body>
</html>
